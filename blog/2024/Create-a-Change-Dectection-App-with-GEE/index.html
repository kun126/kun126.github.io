<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Create a Change Detection App with GEE | Kun Chen </title> <meta name="author" content="Kun Chen"> <meta name="description" content=""> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/prof_pic_comics.ico?9aff05c939b3d98cf42ae809f7ab15c6"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://kun126.github.io/blog/2024/Create-a-Change-Dectection-App-with-GEE/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script src="/assets/js/distillpub/template.v2.js"></script> <script src="/assets/js/distillpub/transforms.v2.js"></script> <script src="/assets/js/distillpub/overrides.js"></script> </head> <body> <d-front-matter> <script async type="text/json">
      {
            "title": "Create a Change Detection App with GEE",
            "description": "",
            "published": "December 01, 2024",
            "authors": [
              
              {
                "author": "Kun Chen",
                "authorURL": "https://kun126.github.io",
                "affiliations": [
                  {
                    "name": "Data-Pop Alliance, New York",
                    "url": ""
                  }
                ]
              }
              
            ],
            "katex": {
              "delimiters": [
                {
                  "left": "$",
                  "right": "$",
                  "display": false
                },
                {
                  "left": "$$",
                  "right": "$$",
                  "display": true
                }
              ]
            }
          }
    </script> </d-front-matter> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Kun</span> Chen </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/book_travel/">book &amp; travel </a> </li> <li class="nav-item "> <a class="nav-link" href="/life/">✨ </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="post distill"> <d-title> <h1>Create a Change Detection App with GEE</h1> <p></p> </d-title> <d-byline></d-byline> <d-article> <d-contents> <nav class="l-text figcaption"> <h3>Contents</h3> <div> <a href="#introduction">Introduction</a> </div> <div> <a href="#step-1-refactor-the-code">Step 1 Refactor the Code</a> </div> <div> <a href="#step-2-create-a-split-panel-visualization">Step 2 Create a Split Panel Visualization</a> </div> <div> <a href="#step-3-add-interactive-controls">Step 3 Add Interactive Controls</a> </div> <div> <a href="#step-4-combine-panels">Step 4 Combine Panels</a> </div> <div> <a href="#step-5-app-initialization">Step 5 App Initialization</a> </div> </nav> </d-contents> <h2 id="introduction">Introduction</h2> <p>Recently, I explored the <a href="https://www.dynamicworld.app/explore/" rel="external nofollow noopener" target="_blank">Dynamic World App</a>, which is a great example of how to use Google Earth Engine (GEE) for interactive applications. Instead of focusing on analysis in GEE, this guide will show how to refactor code and add UI components to create an interactive app.</p> <p>The objectives for a GEE app might include:</p> <ul> <li>Displaying key information such as methodology, datasets, and references.</li> <li>Adding tools to control the map frame, like selecting an area, adjusting opacity, or changing dates.</li> <li>Integrating visualizations and charts for specific regions or points, often with time-series data.</li> </ul> <p>For this tutorial, we will use <a href="https://developers.google.com/earth-engine/tutorials/community/introduction-to-dynamic-world-pt-3#change_detection_using_probability_bands" rel="external nofollow noopener" target="_blank">Change Detection Using Probability Bands</a> as the base. You can find the <a href="https://code.earthengine.google.com/2dc41ef62608d81ee4cb8d2e72287a1b" rel="external nofollow noopener" target="_blank">original scripts</a>. The app will allow users to:</p> <ul> <li>Select provinces within the Lazio region.</li> <li>Set “before” and “after” years for change detection.</li> <li>Adjust the opacity of Sentinel imagery.</li> <li>View descriptive information.</li> </ul> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/for_post/4originalchangedetection-480.webp 480w,/assets/img/for_post/4originalchangedetection-800.webp 800w,/assets/img/for_post/4originalchangedetection-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/for_post/4originalchangedetection.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/for_post/5appchangedetection-480.webp 480w,/assets/img/for_post/5appchangedetection-800.webp 800w,/assets/img/for_post/5appchangedetection-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/for_post/5appchangedetection.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Left: map by the base scripts, Right: app from this post </div> <p><a href="https://ee-kunchen126.projects.earthengine.app/view/change-detection" rel="external nofollow noopener" target="_blank">View the app here</a> and <a href="https://code.earthengine.google.com/08493572fa201e3f800105d57dcfa684" rel="external nofollow noopener" target="_blank">access the full scripts here</a>.</p> <hr> <h2 id="step-1-refactor-the-code">Step 1 Refactor the Code</h2> <p>To start, divide the scripts into smaller, reusable sub-functions. This makes the code more organized and highlights which functions rely on inputs that can be made interactive. This structure will also simplify the process of updating the app based on user input.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Function to filter province geometry by province name.</span>
<span class="kd">function</span> <span class="nf">getProvinceGeometry</span><span class="p">(</span><span class="nx">provinceName</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">admin2</span><span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nf">eq</span><span class="p">(</span><span class="dl">'</span><span class="s1">ADM2_NAME</span><span class="dl">'</span><span class="p">,</span> <span class="nx">provinceName</span><span class="p">)).</span><span class="nf">geometry</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// Filter Dynamic World Collection</span>
<span class="kd">function</span> <span class="nf">getDynamicWorldBuiltCollection</span><span class="p">(</span><span class="nx">geometry</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">ee</span><span class="p">.</span><span class="nc">ImageCollection</span><span class="p">(</span><span class="dl">'</span><span class="s1">GOOGLE/DYNAMICWORLD/V1</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">filterBounds</span><span class="p">(</span><span class="nx">geometry</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="dl">'</span><span class="s1">built</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Create Mean Composite </span>
<span class="kd">function</span> <span class="nf">createMeanComposite</span><span class="p">(</span><span class="nx">dwCollection</span><span class="p">,</span> <span class="nx">startDate</span><span class="p">,</span> <span class="nx">endDate</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">dwCollection</span><span class="p">.</span><span class="nf">filterDate</span><span class="p">(</span><span class="nx">startDate</span><span class="p">,</span> <span class="nx">endDate</span><span class="p">).</span><span class="nf">mean</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// Detect New Urban Areas </span>
<span class="kd">function</span> <span class="nf">detectNewUrban</span><span class="p">(</span><span class="nx">beforeDw</span><span class="p">,</span> <span class="nx">afterDw</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">beforeDw</span><span class="p">.</span><span class="nf">lt</span><span class="p">(</span><span class="mf">0.2</span><span class="p">).</span><span class="nf">and</span><span class="p">(</span><span class="nx">afterDw</span><span class="p">.</span><span class="nf">gt</span><span class="p">(</span><span class="mf">0.5</span><span class="p">));</span>
<span class="p">}</span>

<span class="c1">// Filter Sentinel-2 Collection</span>
<span class="kd">function</span> <span class="nf">getSentinel2Collection</span><span class="p">(</span><span class="nx">geometry</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">ee</span><span class="p">.</span><span class="nc">ImageCollection</span><span class="p">(</span><span class="dl">'</span><span class="s1">COPERNICUS/S2</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">filterBounds</span><span class="p">(</span><span class="nx">geometry</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="nx">commonBands</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nf">lt</span><span class="p">(</span><span class="dl">'</span><span class="s1">CLOUDY_PIXEL_PERCENTAGE</span><span class="dl">'</span><span class="p">,</span> <span class="mi">35</span><span class="p">));</span>
<span class="p">}</span>

<span class="c1">// Create Median Composite </span>
<span class="kd">function</span> <span class="nf">createMedianComposite</span><span class="p">(</span><span class="nx">s2Collection</span><span class="p">,</span> <span class="nx">startDate</span><span class="p">,</span> <span class="nx">endDate</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">s2Collection</span><span class="p">.</span><span class="nf">filterDate</span><span class="p">(</span><span class="nx">startDate</span><span class="p">,</span> <span class="nx">endDate</span><span class="p">).</span><span class="nf">median</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// Add Layer to Map</span>
<span class="kd">function</span> <span class="nf">addLayerToMap</span><span class="p">(</span><span class="nx">map</span><span class="p">,</span> <span class="nx">image</span><span class="p">,</span> <span class="nx">visParams</span><span class="p">,</span> <span class="nx">layerName</span><span class="p">,</span> <span class="nx">geometry</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">map</span><span class="p">.</span><span class="nf">addLayer</span><span class="p">(</span><span class="nx">image</span><span class="p">.</span><span class="nf">clip</span><span class="p">(</span><span class="nx">geometry</span><span class="p">),</span> <span class="nx">visParams</span><span class="p">,</span> <span class="nx">layerName</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure> <hr> <h2 id="step-2-create-a-split-panel-visualization">Step 2 Create a Split Panel Visualization</h2> <p>The app will use GEE’s <a href="https://developers.google.com/earth-engine/apidocs/ui-splitpanel" rel="external nofollow noopener" target="_blank">Split Panel</a> to compare two maps side by side:</p> <ul> <li> <strong>Left panel</strong>: Displays the satellite image from the “before” period.</li> <li> <strong>Right panel</strong>: Shows the change in built-up areas overlaid on the “after” satellite image.</li> </ul> <p>To create this:</p> <ol> <li>Create two separate maps.</li> <li>Add layers to each map.</li> <li>Link the maps to synchronize their views.</li> <li>Add the maps to a Split Panel layout.</li> </ol> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Map configuration</span>
<span class="kd">var</span> <span class="nx">beforeMap</span> <span class="o">=</span> <span class="nx">ui</span><span class="p">.</span><span class="nc">Map</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">afterMap</span> <span class="o">=</span> <span class="nx">ui</span><span class="p">.</span><span class="nc">Map</span><span class="p">();</span>
<span class="nx">beforeMap</span><span class="p">.</span><span class="nf">centerObject</span><span class="p">(</span><span class="nx">geometry</span><span class="p">,</span> <span class="mi">12</span><span class="p">);</span>
<span class="nx">afterMap</span><span class="p">.</span><span class="nf">centerObject</span><span class="p">(</span><span class="nx">geometry</span><span class="p">,</span> <span class="mi">12</span><span class="p">);</span>

<span class="c1">// Add layers to before map</span>
<span class="nf">addLayerToMap</span><span class="p">(</span><span class="nx">beforeMap</span><span class="p">,</span> <span class="nx">beforeS2</span><span class="p">,</span> <span class="nx">s2beforeVisParams</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Before S2</span><span class="dl">'</span><span class="p">,</span> <span class="nx">geometry</span><span class="p">);</span>

<span class="c1">// Add layers to after map</span>
<span class="nf">addLayerToMap</span><span class="p">(</span><span class="nx">afterMap</span><span class="p">,</span> <span class="nx">afterS2</span><span class="p">,</span> <span class="nx">s2afterVisParams</span><span class="p">,</span> <span class="dl">'</span><span class="s1">After S2</span><span class="dl">'</span><span class="p">,</span> <span class="nx">geometry</span><span class="p">);</span>
<span class="nf">addLayerToMap</span><span class="p">(</span><span class="nx">afterMap</span><span class="p">,</span> <span class="nx">newUrban</span><span class="p">.</span><span class="nf">selfMask</span><span class="p">(),</span> <span class="nx">changeVisParams</span><span class="p">,</span> <span class="dl">'</span><span class="s1">New Urban (After)</span><span class="dl">'</span><span class="p">,</span> <span class="nx">geometry</span><span class="p">);</span>

<span class="c1">// Link the maps for synchronized movement</span>
<span class="kd">var</span> <span class="nx">linker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ui</span><span class="p">.</span><span class="nb">Map</span><span class="p">.</span><span class="nc">Linker</span><span class="p">([</span><span class="nx">beforeMap</span><span class="p">,</span> <span class="nx">afterMap</span><span class="p">]);</span>

<span class="c1">// Create a split panel</span>
<span class="kd">var</span> <span class="nx">splitPanel</span> <span class="o">=</span> <span class="nx">ui</span><span class="p">.</span><span class="nc">SplitPanel</span><span class="p">({</span>
  <span class="na">firstPanel</span><span class="p">:</span> <span class="nx">beforeMap</span><span class="p">,</span>
  <span class="na">secondPanel</span><span class="p">:</span> <span class="nx">afterMap</span><span class="p">,</span>
  <span class="na">orientation</span><span class="p">:</span> <span class="dl">'</span><span class="s1">horizontal</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">wipe</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">});</span></code></pre></figure> <hr> <h2 id="step-3-add-interactive-controls">Step 3 Add Interactive Controls</h2> <p>Interactive controls make the app dynamic, allowing users to update the map based on their selections. We’ll wrap the logic from Step 1 into an <code class="language-plaintext highlighter-rouge">updateMaps()</code> function to refresh the display with new inputs. Additionally, we’ll reset map layers with <code class="language-plaintext highlighter-rouge">Map.layers().reset()</code> each time.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Update Maps</span>
<span class="kd">function</span> <span class="nf">updateMaps</span><span class="p">(</span><span class="nx">provinceName</span><span class="p">,</span> <span class="nx">beforeYear</span><span class="p">,</span> <span class="nx">afterYear</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">beforeMap</span><span class="p">.</span><span class="nf">layers</span><span class="p">().</span><span class="nf">reset</span><span class="p">();</span>
  <span class="nx">afterMap</span><span class="p">.</span><span class="nf">layers</span><span class="p">().</span><span class="nf">reset</span><span class="p">();</span>
  
  <span class="kd">var</span> <span class="nx">geometry</span> <span class="o">=</span> <span class="nf">getProvinceGeometry</span><span class="p">(</span><span class="nx">provinceName</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">beforeStart</span> <span class="o">=</span> <span class="nx">ee</span><span class="p">.</span><span class="nb">Date</span><span class="p">.</span><span class="nf">fromYMD</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nb">Number</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nx">beforeYear</span><span class="p">),</span> <span class="mi">1</span> <span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">beforeEnd</span> <span class="o">=</span> <span class="nx">beforeStart</span><span class="p">.</span><span class="nf">advance</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="dl">'</span><span class="s1">year</span><span class="dl">'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">afterStart</span> <span class="o">=</span> <span class="nx">ee</span><span class="p">.</span><span class="nb">Date</span><span class="p">.</span><span class="nf">fromYMD</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nb">Number</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nx">afterYear</span><span class="p">),</span> <span class="mi">1</span> <span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">afterEnd</span> <span class="o">=</span> <span class="nx">afterStart</span><span class="p">.</span><span class="nf">advance</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="dl">'</span><span class="s1">year</span><span class="dl">'</span><span class="p">);</span>
  
  <span class="c1">// Dynamic World Processing</span>
  <span class="kd">var</span> <span class="nx">dw</span> <span class="o">=</span> <span class="nf">getDynamicWorldBuiltCollection</span><span class="p">(</span><span class="nx">geometry</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">beforeDw</span> <span class="o">=</span> <span class="nf">createMeanComposite</span><span class="p">(</span><span class="nx">dw</span><span class="p">,</span> <span class="nx">beforeStart</span><span class="p">,</span> <span class="nx">beforeEnd</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">afterDw</span> <span class="o">=</span> <span class="nf">createMeanComposite</span><span class="p">(</span><span class="nx">dw</span><span class="p">,</span> <span class="nx">afterStart</span><span class="p">,</span> <span class="nx">afterEnd</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">newUrban</span> <span class="o">=</span> <span class="nf">detectNewUrban</span><span class="p">(</span><span class="nx">beforeDw</span><span class="p">,</span> <span class="nx">afterDw</span><span class="p">);</span>
  
  <span class="c1">// Sentinel-2 Processing</span>
  <span class="kd">var</span> <span class="nx">s2</span> <span class="o">=</span> <span class="nf">getSentinel2Collection</span><span class="p">(</span><span class="nx">geometry</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">beforeS2</span> <span class="o">=</span> <span class="nf">createMedianComposite</span><span class="p">(</span><span class="nx">s2</span><span class="p">,</span> <span class="nx">beforeStart</span><span class="p">,</span> <span class="nx">beforeEnd</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">afterS2</span> <span class="o">=</span> <span class="nf">createMedianComposite</span><span class="p">(</span><span class="nx">s2</span><span class="p">,</span> <span class="nx">afterStart</span><span class="p">,</span> <span class="nx">afterEnd</span><span class="p">);</span>
  
  <span class="c1">// Add layers to maps</span>
  <span class="nf">addLayerToMap</span><span class="p">(</span><span class="nx">beforeMap</span><span class="p">,</span> <span class="nx">beforeS2</span><span class="p">,</span> <span class="nx">s2beforeVisParams</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Before S2</span><span class="dl">'</span><span class="p">,</span> <span class="nx">geometry</span><span class="p">);</span>
  <span class="nf">addLayerToMap</span><span class="p">(</span><span class="nx">afterMap</span><span class="p">,</span> <span class="nx">afterS2</span><span class="p">,</span> <span class="nx">s2afterVisParams</span><span class="p">,</span> <span class="dl">'</span><span class="s1">After S2</span><span class="dl">'</span><span class="p">,</span> <span class="nx">geometry</span><span class="p">);</span>
  <span class="nf">addLayerToMap</span><span class="p">(</span><span class="nx">afterMap</span><span class="p">,</span> <span class="nx">newUrban</span><span class="p">.</span><span class="nf">selfMask</span><span class="p">(),</span> <span class="nx">changeVisParams</span><span class="p">,</span> <span class="dl">'</span><span class="s1">New Urban (After)</span><span class="dl">'</span><span class="p">,</span> <span class="nx">geometry</span><span class="p">);</span>

  <span class="c1">// Center maps on geometry</span>
  <span class="nx">beforeMap</span><span class="p">.</span><span class="nf">centerObject</span><span class="p">(</span><span class="nx">geometry</span><span class="p">,</span> <span class="mi">12</span><span class="p">);</span>
  <span class="nx">afterMap</span><span class="p">.</span><span class="nf">centerObject</span><span class="p">(</span><span class="nx">geometry</span><span class="p">,</span> <span class="mi">12</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure> <h3 id="area-selector">Area Selector</h3> <p>We’ll use <code class="language-plaintext highlighter-rouge">ui.Select()</code> to create a dropdown menu of Lazio’s provinces. Each time the selection changes, trigger the <code class="language-plaintext highlighter-rouge">updateMaps()</code> function with <code class="language-plaintext highlighter-rouge">Selector.onChange()</code>.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Admin Polygons</span>
<span class="kd">var</span> <span class="nx">admin2</span> <span class="o">=</span> <span class="nx">ee</span><span class="p">.</span><span class="nc">FeatureCollection</span><span class="p">(</span><span class="dl">'</span><span class="s1">FAO/GAUL_SIMPLIFIED_500m/2015/level2</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">areas</span> <span class="o">=</span> <span class="nx">admin2</span><span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nf">eq</span><span class="p">(</span><span class="dl">'</span><span class="s1">ADM1_NAME</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Lazio</span><span class="dl">'</span><span class="p">)).</span><span class="nf">aggregate_array</span><span class="p">(</span><span class="dl">'</span><span class="s1">ADM2_NAME</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Selector</span>
<span class="kd">var</span> <span class="nx">provinceSelector</span> <span class="o">=</span> <span class="nx">ui</span><span class="p">.</span><span class="nc">Select</span><span class="p">({</span>
  <span class="na">items</span><span class="p">:</span> <span class="nx">areas</span><span class="p">.</span><span class="nf">getInfo</span><span class="p">(),</span>
  <span class="na">placeholder</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Select a province</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">value</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Roma</span><span class="dl">'</span><span class="p">,</span> 
  <span class="na">style</span><span class="p">:</span> <span class="p">{</span><span class="na">width</span><span class="p">:</span> <span class="dl">'</span><span class="s1">200px</span><span class="dl">'</span><span class="p">,</span> <span class="na">fontSize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">15px</span><span class="dl">'</span><span class="p">,</span> <span class="na">padding</span><span class="p">:</span> <span class="dl">'</span><span class="s1">5px</span><span class="dl">'</span><span class="p">}</span>
<span class="p">})</span> 

<span class="c1">// Event Listener</span>
<span class="nx">provinceSelector</span><span class="p">.</span><span class="nf">onChange</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">newProvince</span><span class="p">)</span> <span class="p">{</span>
  <span class="nf">updateMaps</span><span class="p">(</span><span class="nx">newProvince</span><span class="p">,</span> <span class="nx">beforeyearText</span><span class="p">.</span><span class="nf">getValue</span><span class="p">(),</span> <span class="nx">afteryearText</span><span class="p">.</span><span class="nf">getValue</span><span class="p">());</span>
<span class="p">});</span></code></pre></figure> <h3 id="before-and-after-year-input">Before and After Year Input</h3> <p>To allow custom date ranges, we’ll use <code class="language-plaintext highlighter-rouge">ui.Textbox()</code> widgets for user input. Two textboxes will let users specify the “before” and “after” years. To prevent unnecessary computations, we use a <code class="language-plaintext highlighter-rouge">ui.Button()</code> to confirm the inputs before triggering the update function.</p> <p>Validation is crucial here. To ensure valid inputs, use a <code class="language-plaintext highlighter-rouge">validateYear()</code> function linked to a feedback label. Validation rules, such as chronological order or range constraints, are applied when the user clicks the submit button.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Textboxes and submit button</span>
<span class="kd">var</span> <span class="nx">beforeyearText</span> <span class="o">=</span> <span class="nx">ui</span><span class="p">.</span><span class="nc">Textbox</span><span class="p">({</span><span class="na">placeholder</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2015</span><span class="dl">'</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2015</span><span class="dl">'</span><span class="p">});</span>
<span class="kd">var</span> <span class="nx">afteryearText</span> <span class="o">=</span> <span class="nx">ui</span><span class="p">.</span><span class="nc">Textbox</span><span class="p">({</span><span class="na">placeholder</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2020</span><span class="dl">'</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2020</span><span class="dl">'</span><span class="p">});</span>
<span class="kd">var</span> <span class="nx">submitButton</span> <span class="o">=</span> <span class="nx">ui</span><span class="p">.</span><span class="nc">Button</span><span class="p">({</span><span class="na">label</span><span class="p">:</span> <span class="dl">'</span><span class="s1">UPDATE</span><span class="dl">'</span><span class="p">,</span> <span class="na">style</span><span class="p">:</span> <span class="p">{</span><span class="na">width</span><span class="p">:</span> <span class="dl">'</span><span class="s1">153px</span><span class="dl">'</span><span class="p">}})</span>
 
 <span class="c1">// Validation Feedback</span>
<span class="kd">var</span> <span class="nx">feedbackLabel</span> <span class="o">=</span> <span class="nx">ui</span><span class="p">.</span><span class="nc">Label</span><span class="p">(</span><span class="dl">''</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">fontSize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">12px</span><span class="dl">'</span><span class="p">,</span> 
  <span class="na">margin</span><span class="p">:</span> <span class="dl">'</span><span class="s1">0 auto</span><span class="dl">'</span><span class="p">,</span> 
  <span class="na">width</span><span class="p">:</span> <span class="dl">'</span><span class="s1">150px</span><span class="dl">'</span><span class="p">,</span> 
  <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">rgba(255, 255, 255, 0)</span><span class="dl">'</span>
<span class="p">});</span>

 <span class="c1">// Function to validate the input dates</span>
<span class="kd">function</span> <span class="nf">validateYear</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">beforeYear</span> <span class="o">=</span> <span class="nc">Number</span><span class="p">(</span><span class="nx">beforeyearText</span><span class="p">.</span><span class="nf">getValue</span><span class="p">());</span>
  <span class="kd">var</span> <span class="nx">afterYear</span> <span class="o">=</span> <span class="nc">Number</span><span class="p">(</span><span class="nx">afteryearText</span><span class="p">.</span><span class="nf">getValue</span><span class="p">());</span>
  <span class="c1">// Clear feedback label and reset style to red by default</span>
  <span class="nx">feedbackLabel</span><span class="p">.</span><span class="nf">setValue</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
  <span class="nx">feedbackLabel</span><span class="p">.</span><span class="nf">style</span><span class="p">().</span><span class="nf">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">color</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">red</span><span class="dl">'</span><span class="p">);</span>
  <span class="c1">// Check if all dates are valid</span>
  <span class="k">if </span><span class="p">(</span><span class="nx">beforeYear</span> <span class="o">&lt;</span> <span class="dl">'</span><span class="s1">2015</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">feedbackLabel</span><span class="p">.</span><span class="nf">setValue</span><span class="p">(</span><span class="dl">'</span><span class="s1">Before Year should be no earlier than 2015.</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if </span><span class="p">(</span><span class="nx">afterYear</span> <span class="o">&gt;</span> <span class="nx">ee</span><span class="p">.</span><span class="nc">Date</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nf">now</span><span class="p">()).</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">year</span><span class="dl">'</span><span class="p">).</span><span class="nf">getInfo</span><span class="p">())</span> <span class="p">{</span>
    <span class="nx">feedbackLabel</span><span class="p">.</span><span class="nf">setValue</span><span class="p">(</span><span class="dl">'</span><span class="s1">After Year should be no later than the current year.</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// Check chronological order</span>
  <span class="k">if </span><span class="p">(</span><span class="nx">beforeYear</span> <span class="o">&gt;</span> <span class="nx">afterYear</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">feedbackLabel</span><span class="p">.</span><span class="nf">setValue</span><span class="p">(</span><span class="dl">'</span><span class="s1">Before Year should be earlier than After Year.</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// If all checks pass, show success message in green</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Event Listener</span>
<span class="nx">submitButton</span><span class="p">.</span><span class="nf">onClick</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> 
  <span class="k">if </span><span class="p">(</span><span class="nf">validateYear</span><span class="p">())</span> <span class="p">{</span>
    <span class="nf">updateMaps</span><span class="p">(</span><span class="nx">provinceSelector</span><span class="p">.</span><span class="nf">getValue</span><span class="p">(),</span> <span class="nx">beforeyearText</span><span class="p">.</span><span class="nf">getValue</span><span class="p">(),</span> <span class="nx">afteryearText</span><span class="p">.</span><span class="nf">getValue</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">})</span></code></pre></figure> <h3 id="opacity-slider">Opacity Slider</h3> <p>The last interactive component is opacity control. An opacity slider using <code class="language-plaintext highlighter-rouge">ui.Slider()</code> will let users adjust the visibility of satellite imagery. This control is especially useful for comparing new built-up areas with the basemap (Google Maps).</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">opacitySlider</span> <span class="o">=</span> <span class="nx">ui</span><span class="p">.</span><span class="nc">Slider</span><span class="p">({</span>
  <span class="na">min</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> 
  <span class="na">max</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> 
  <span class="na">value</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">style</span><span class="p">:</span> <span class="p">{</span><span class="na">width</span><span class="p">:</span> <span class="dl">'</span><span class="s1">240px</span><span class="dl">'</span><span class="p">,</span> <span class="na">fontSize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">15px</span><span class="dl">'</span><span class="p">,</span> <span class="na">padding</span><span class="p">:</span> <span class="dl">'</span><span class="s1">5px</span><span class="dl">'</span><span class="p">}</span>
<span class="p">});</span>

<span class="c1">// Event Listener</span>
<span class="nx">opacitySlider</span><span class="p">.</span><span class="nf">onChange</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">beforeMap</span><span class="p">.</span><span class="nf">layers</span><span class="p">().</span><span class="nf">get</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nf">setOpacity</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
  <span class="nx">afterMap</span><span class="p">.</span><span class="nf">layers</span><span class="p">().</span><span class="nf">get</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nf">setOpacity</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
<span class="p">});</span></code></pre></figure> <hr> <h2 id="step-4-combine-panels">Step 4 Combine Panels</h2> <h3 id="year-selection-panel">Year Selection Panel</h3> <p>We’ll create a semi-transparent panel to mimic the style of the Dynamic World App. This panel will contain the textboxes, a submit button, and descriptive labels. Add it to the left map panel using <code class="language-plaintext highlighter-rouge">beforeMap.add(yearPanel)</code>. To improve aesthetics, use <code class="language-plaintext highlighter-rouge">beforeMap.setControlVisibility()</code> to disable unnecessary default buttons.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Year Selection Panel</span>
<span class="kd">var</span> <span class="nx">yearPanel</span> <span class="o">=</span> <span class="nx">ui</span><span class="p">.</span><span class="nc">Panel</span><span class="p">({</span>
  <span class="na">widgets</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">ui</span><span class="p">.</span><span class="nc">Label</span><span class="p">(</span><span class="dl">'</span><span class="s1">Before Year</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span><span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">,</span> <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">rgba(255, 255, 255, 0)</span><span class="dl">'</span><span class="p">}),</span>
    <span class="nx">beforeyearText</span><span class="p">,</span>
    <span class="nx">ui</span><span class="p">.</span><span class="nc">Label</span><span class="p">(</span><span class="dl">'</span><span class="s1">After Year</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span><span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">,</span> <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">rgba(255, 255, 255, 0)</span><span class="dl">'</span><span class="p">}),</span>
    <span class="nx">afteryearText</span><span class="p">,</span>
    <span class="nx">feedbackLabel</span><span class="p">,</span>
    <span class="nx">submitButton</span>
  <span class="p">],</span>
  <span class="na">style</span><span class="p">:</span> <span class="p">{</span><span class="na">position</span><span class="p">:</span> <span class="dl">'</span><span class="s1">top-left</span><span class="dl">'</span><span class="p">,</span> <span class="na">height</span><span class="p">:</span> <span class="dl">'</span><span class="s1">235px</span><span class="dl">'</span><span class="p">,</span> <span class="na">width</span><span class="p">:</span> <span class="dl">'</span><span class="s1">200px</span><span class="dl">'</span><span class="p">,</span> <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">rgba(255, 255, 255, 0.6)</span><span class="dl">'</span><span class="p">,}</span>
<span class="p">});</span></code></pre></figure> <h3 id="split-panel-adjustments">Split Panel Adjustments</h3> <p>We’ll slightly adjust the split panel from Step 2 by removing location-sensitive components like <code class="language-plaintext highlighter-rouge">centerObject()</code>. These will be refreshed dynamically in the <code class="language-plaintext highlighter-rouge">updateMaps()</code> function. Add the year selection panel to the left map and clean up the default widgets.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">beforeMap</span> <span class="o">=</span> <span class="nx">ui</span><span class="p">.</span><span class="nc">Map</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">afterMap</span> <span class="o">=</span> <span class="nx">ui</span><span class="p">.</span><span class="nc">Map</span><span class="p">();</span>
<span class="nx">beforeMap</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="nx">yearPanel</span><span class="p">).</span><span class="nf">setControlVisibility</span><span class="p">({</span><span class="na">all</span><span class="p">:</span><span class="kc">false</span><span class="p">});</span>
<span class="nx">afterMap</span><span class="p">.</span><span class="nf">setControlVisibility</span><span class="p">({</span><span class="na">mapTypeControl</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span> <span class="na">fullscreenControl</span><span class="p">:</span><span class="kc">false</span><span class="p">});</span>

<span class="kd">var</span> <span class="nx">linker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ui</span><span class="p">.</span><span class="nb">Map</span><span class="p">.</span><span class="nc">Linker</span><span class="p">([</span><span class="nx">beforeMap</span><span class="p">,</span> <span class="nx">afterMap</span><span class="p">]);</span>

<span class="kd">var</span> <span class="nx">splitPanel</span> <span class="o">=</span> <span class="nx">ui</span><span class="p">.</span><span class="nc">SplitPanel</span><span class="p">({</span>
  <span class="na">firstPanel</span><span class="p">:</span> <span class="nx">beforeMap</span><span class="p">,</span>
  <span class="na">secondPanel</span><span class="p">:</span> <span class="nx">afterMap</span><span class="p">,</span>
  <span class="na">orientation</span><span class="p">:</span> <span class="dl">'</span><span class="s1">horizontal</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">wipe</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">});</span></code></pre></figure> <h3 id="info-panel">Info Panel</h3> <p>Finally, create an information panel to display a title, introduction, and references. Use a <code class="language-plaintext highlighter-rouge">ui.Panel()</code> with a divider to structure this content. Add it alongside the interactive controls for a cohesive layout.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Horizontal Black Line (divider)</span>
<span class="kd">function</span> <span class="nf">createDivider</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">ui</span><span class="p">.</span><span class="nc">Panel</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="na">border</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1px solid black</span><span class="dl">'</span><span class="p">,</span> <span class="na">margin</span><span class="p">:</span> <span class="dl">'</span><span class="s1">8px auto</span><span class="dl">'</span><span class="p">,</span> <span class="na">width</span><span class="p">:</span> <span class="dl">'</span><span class="s1">95%</span><span class="dl">'</span><span class="p">});</span>
<span class="p">}</span>

<span class="c1">// Info Panel</span>
<span class="kd">var</span> <span class="nx">infoPanel</span> <span class="o">=</span> <span class="nx">ui</span><span class="p">.</span><span class="nc">Panel</span><span class="p">({</span>
  <span class="na">widgets</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">ui</span><span class="p">.</span><span class="nc">Label</span><span class="p">(</span><span class="dl">'</span><span class="s1">Change Detection using Dynamic World</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span><span class="na">fontSize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">18px</span><span class="dl">'</span><span class="p">,</span> <span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">}),</span>
    <span class="nx">ui</span><span class="p">.</span><span class="nc">Label</span><span class="p">(</span><span class="dl">'</span><span class="s1">The Dynamic World dataset provides a time-series of per-pixel class </span><span class="dl">'</span><span class="o">+</span>
    <span class="dl">'</span><span class="s1">probabilities, enabling easy construction of change detection models without </span><span class="dl">'</span><span class="o">+</span>
    <span class="dl">'</span><span class="s1">custom training or data collection. This example demonstrates how to use these</span><span class="dl">'</span><span class="o">+</span>
    <span class="dl">'</span><span class="s1">probability bands to study urban changes over time.</span><span class="dl">'</span><span class="p">),</span>
    <span class="nf">createDivider</span><span class="p">(),</span> 
    <span class="nx">ui</span><span class="p">.</span><span class="nc">Label</span><span class="p">(</span><span class="dl">'</span><span class="s1">Province in Lazio</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span><span class="na">fontSize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">15px</span><span class="dl">'</span><span class="p">,</span> <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">grey</span><span class="dl">'</span><span class="p">,</span> <span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">}),</span>
    <span class="nx">provinceSelector</span><span class="p">,</span>
    <span class="nf">createDivider</span><span class="p">(),</span> 
    <span class="nx">ui</span><span class="p">.</span><span class="nc">Label</span><span class="p">(</span><span class="dl">'</span><span class="s1">Opacity</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span><span class="na">fontSize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">15px</span><span class="dl">'</span><span class="p">,</span> <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">grey</span><span class="dl">'</span><span class="p">,</span> <span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">}),</span>
    <span class="nx">opacitySlider</span><span class="p">,</span>
    <span class="nf">createDivider</span><span class="p">(),</span> 
    <span class="nx">ui</span><span class="p">.</span><span class="nc">Label</span><span class="p">(</span><span class="dl">'</span><span class="s1">Reference</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span><span class="na">fontSize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">15px</span><span class="dl">'</span><span class="p">,</span> <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">grey</span><span class="dl">'</span><span class="p">,</span> <span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">}),</span>
    <span class="nx">refOne</span><span class="p">,</span>
    <span class="nx">refTwo</span>
  <span class="p">],</span>
  <span class="na">style</span><span class="p">:</span> <span class="p">{</span><span class="na">width</span><span class="p">:</span> <span class="dl">'</span><span class="s1">300px</span><span class="dl">'</span><span class="p">,</span> <span class="na">padding</span><span class="p">:</span> <span class="dl">'</span><span class="s1">15px</span><span class="dl">'</span><span class="p">}</span>
<span class="p">});</span></code></pre></figure> <hr> <h2 id="step-5-app-initialization">Step 5 App Initialization</h2> <p>To complete the app:</p> <ul> <li>Call the <code class="language-plaintext highlighter-rouge">updateMaps()</code> function to render the map with default parameters.</li> <li>Combine the <code class="language-plaintext highlighter-rouge">infoPanel</code> and <code class="language-plaintext highlighter-rouge">splitPanel</code> into a root panel.</li> <li>Display the app by attaching the root panel to the UI.</li> </ul> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nf">updateMaps</span><span class="p">(</span><span class="nx">provinceSelector</span><span class="p">.</span><span class="nf">getValue</span><span class="p">(),</span> <span class="nx">beforeyearText</span><span class="p">.</span><span class="nf">getValue</span><span class="p">(),</span> <span class="nx">afteryearText</span><span class="p">.</span><span class="nf">getValue</span><span class="p">());</span>

<span class="nx">ui</span><span class="p">.</span><span class="nx">root</span><span class="p">.</span><span class="nf">clear</span><span class="p">();</span>
<span class="nx">ui</span><span class="p">.</span><span class="nx">root</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="nx">ui</span><span class="p">.</span><span class="nc">Panel</span><span class="p">({</span>
  <span class="na">widgets</span><span class="p">:</span> <span class="p">[</span><span class="nx">infoPanel</span><span class="p">,</span> <span class="nx">splitPanel</span><span class="p">],</span>
  <span class="na">layout</span><span class="p">:</span> <span class="nx">ui</span><span class="p">.</span><span class="nx">Panel</span><span class="p">.</span><span class="nx">Layout</span><span class="p">.</span><span class="nf">flow</span><span class="p">(</span><span class="dl">'</span><span class="s1">horizontal</span><span class="dl">'</span><span class="p">),</span>
  <span class="na">style</span><span class="p">:</span> <span class="p">{</span><span class="na">stretch</span><span class="p">:</span> <span class="dl">'</span><span class="s1">both</span><span class="dl">'</span><span class="p">}</span>
  <span class="p">})</span>
<span class="p">);</span></code></pre></figure> </d-article> <d-appendix> <d-footnote-list></d-footnote-list> <d-citation-list></d-citation-list> </d-appendix> <d-bibliography src="/assets/bibliography/"></d-bibliography> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Kun Chen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>. </div> </footer> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-repositories",title:"repositories",description:"",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-cv",title:"cv",description:"",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"nav-book-amp-travel",title:"book &amp; travel",description:"A growing collection of books and travel experiences.",section:"Navigation",handler:()=>{window.location.href="/book_travel/"}},{id:"nav-",title:"\u2728",description:"",section:"Navigation",handler:()=>{window.location.href="/life/"}},{id:"post-create-a-change-detection-app-with-gee",title:"Create a Change Detection App with GEE",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/Create-a-Change-Dectection-App-with-GEE/"}},{id:"post-high-resolution-population-estimates",title:"High Resolution Population Estimates",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/Population-Estimates/"}},{id:"post-decorator-essentials",title:"Decorator Essentials",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/Decorator-Essentials/"}},{id:"post-gender-stereotypes-in-chatgpt",title:"Gender Stereotypes in ChatGPT",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2023/Gender-Stereotypes-in-ChatGPT/"}},{id:"post-framework-and-limitations-of-llm-based-gender-stereotypes-analysis",title:"Framework and Limitations of LLM-based Gender Stereotypes Analysis",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2023/Framework-and-Limitations-of-LLM-based-Gender-Stereotypes-Analysis/"}},{id:"post-why-chatgpt-is-better-at-pronoun-based-analysis",title:"Why ChatGPT is Better at Pronoun-based Analysis",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2023/Why-ChatGPT-is-Better-for-Pronoun-based-Analysis/"}},{id:"news-i-39-m-migrating-my-webpage-to-a-new-setting-https-github-com-alshedivat-al-folio",title:"I&#39;m migrating my webpage to a [new setting](https://github.com/alshedivat/al-folio)",description:"",section:"News"},{id:"news-my-map-visualizations-were-published-in-a-un-report",title:"My map visualizations were published in a UN report",description:"",section:"News"},{id:"projects-project-7",title:"project 7",description:"with background image",section:"Projects",handler:()=>{window.location.href="/projects/7_project/"}},{id:"projects-project-8",title:"project 8",description:"an other project with a background image and giscus comments",section:"Projects",handler:()=>{window.location.href="/projects/8_project/"}},{id:"projects-project-9",title:"project 9",description:"another project with an image \ud83c\udf89",section:"Projects",handler:()=>{window.location.href="/projects/9_project/"}},{id:"projects-tove-jansson",title:"Tove Jansson",description:"Fair Play",section:"Projects",handler:()=>{window.location.href="/projects/b_2024_fair/"}},{id:"projects-han-kang",title:"Han Kang",description:"The Vegetarian",section:"Projects",handler:()=>{window.location.href="/projects/b_2024_veg/"}},{id:"projects-haruki-murakami",title:"Haruki Murakami",description:"What I Talk About When I Talk About Running",section:"Projects",handler:()=>{window.location.href="/projects/b_2024_what/"}},{id:"projects-dolomites",title:"Dolomites",description:"Aug 2024",section:"Projects",handler:()=>{window.location.href="/projects/t_2024_dolomites/"}},{id:"projects-helsinki",title:"Helsinki",description:"Dec 2024",section:"Projects",handler:()=>{window.location.href="/projects/t_2024_helsinki/"}},{id:"projects-paris",title:"Paris",description:"Dec 2024",section:"Projects",handler:()=>{window.location.href="/projects/t_2024_paris/"}},{id:"projects-vienna",title:"Vienna",description:"Oct 2024",section:"Projects",handler:()=>{window.location.href="/projects/t_2024_vienna/"}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>